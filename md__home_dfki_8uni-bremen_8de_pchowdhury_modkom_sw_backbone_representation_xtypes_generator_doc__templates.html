<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>xtypes_generator: Template Usage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xtypes_generator
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">This package is a parser for the YAML-represented XTypes and generates there C++ base files as well as the respective pybind11-code.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Template Usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Let's focus on how to write templates. You'll find a sample in <a class="el" href="template_8yaml.html">doc/template.yaml</a>.</p>
<p>A template file has 6 fields/properties you can specify at which we will look now in detail:</p>
<ul>
<li>name</li>
<li>inherit</li>
<li>properties</li>
<li>relations</li>
<li>uuid</li>
<li>methods</li>
</ul>
<p>From this template file the xtype_generator will generate the basic c++ code structure which you will have to populate with your source code. Also the generator will provide the corresponding python bindings to your code; those are ready to use, and you have nothing to do there.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Name</h1>
<p>This is obviously the name of the XType you are going to generate.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Inherit</h1>
<p>This field is optional. You can use it if you want to have your XType to be a child of another XType.</p>
<blockquote class="doxtable">
<p>NOTE: You must not specify <code>inherit: XType</code> this inheritance is already given by default. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md4"></a>
Properties</h1>
<p>In this section you define which properties your XType will have. So to add a property to your XType you'll have to specify the name type and a default value in the following structure.</p>
<div class="fragment"><div class="line">properties:</div>
<div class="line">    a_string:</div>
<div class="line">        type: STRING</div>
<div class="line">        default: &quot;\&quot;DEFAULT\&quot;&quot;</div>
<div class="line">        allowed: [&quot;\&quot;A\&quot;&quot;,&quot;\&quot;B\&quot;&quot;,&quot;\&quot;C\&quot;&quot;]  # optional</div>
<div class="line">    a_small_integer:</div>
<div class="line">        type: INTEGER</div>
<div class="line">        default: 0</div>
<div class="line">    a:</div>
<div class="line">        nested:</div>
<div class="line">            property:</div>
<div class="line">                type: ...</div>
</div><!-- fragment --><p>Pleases see the <a href="#type">Type</a> section and also doc/template.yml for further information on how to specify other types.</p>
<p>With <code>allowed</code> you can limit the set of allowed values for your property. This way you can create an enum-like property.</p>
<p>If you want to further restrict/customize the access to the property you can use <code>advanced_setter: true</code> to let the Generator create an override for the <code>set_</code> method.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Relations</h1>
<p>Here you define how your XType is related to other XTypes. Each relation type defines a cardinality constraint e.g. that one XType can have (HAS) multiple other XTypes instances (ONE2MANY), but can only be an ALIAS_OF one other XType instance (ONE2ONE).</p>
<p>Please see <a class="el" href="_relations_8md.html">doc/Relations.md</a> for the existing Relation types.</p>
<p>The relations are defined using the following structure: </p><div class="fragment"><div class="line">relations:</div>
<div class="line">    children:  # name of the relation</div>
<div class="line">        type: HAS</div>
<div class="line">        other_classname: Template # the name of the other XType</div>
<div class="line">        inverse: false</div>
<div class="line">        properties: {}</div>
<div class="line">    parent:</div>
<div class="line">        type: HAS</div>
<div class="line">        other_classname: Template</div>
<div class="line">        inverse: true   </div>
<div class="line">        properties: {}</div>
</div><!-- fragment --><p>The <code>inverse</code> field show us that we correspond to a relation in the other direction. In this example: HAS defines a relation with the cardinality constraint ONE2MANY: The new XType can have multiple children. With inverse we show the other direction of the relation: The new XType is a child of only one parent.</p>
<p>You may optionally define some properties for your relation.</p>
<p>If you want to restrict/customize access to the relation you can specify <code>advanced_setter: true</code> to let the generator create an override for the <code>add_</code> method. In there you can f.e. check if adding an XType to that relation is allowed or not.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
UUID</h1>
<p>This field specifies by which properties and relations your XType can be recognized as unique.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Methods</h1>
<p>Here you can define member methods your new XType will have. A definition can look like the following. If your method has no arguments or returns nothing feel free to just not specify those parameters. The descriptionis optional as well, but hey, please do your documentation. ;) </p><div class="fragment"><div class="line">methods:</div>
<div class="line">  a_method:</div>
<div class="line">      arguments:</div>
<div class="line">          a_string:</div>
<div class="line">              type: STRING</div>
<div class="line">              default: &quot;\&quot;DEFAULT\&quot;&quot;</div>
<div class="line">          a_bool:</div>
<div class="line">              type: BOOLEAN</div>
<div class="line">              default: True</div>
<div class="line">          a_xtype:</div>
<div class="line">              type: XTYPE(Template)</div>
<div class="line">      description: &quot;A description of what a_method should do&quot;</div>
<div class="line">      returns:</div>
<div class="line">          type: XTYPE(TemplatePtr)</div>
</div><!-- fragment --><p>Regarding the types (explained in the following section) please note that XTYPEs in the arguments are always passed as pointers so you define just XTYPE(Name of the XType). For the return type you have to add the Ptr suffix to your XType name if you want to return the pointer, otherwise a value will be returned.</p>
<p>With <code>static: true</code> a method can be declared static such that it is callable without an instance of the corresponding XType.</p>
<p>With <code>const: true</code> a method can be marked that it shall not modify the XType. The compiler can check this during compile time.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
Types</h1>
<p>For your properties and methods you can make use of the following types. There are some basic atomic types:</p><ul>
<li><em>STRING</em></li>
<li><em>INTEGER</em></li>
<li><em>INTEGER64</em></li>
<li><em>BOOLEAN</em></li>
<li><em>FLOAT</em></li>
<li><em>FLOAT64</em></li>
<li><em>JSON</em></li>
<li><em>ANY</em></li>
</ul>
<p>Then there are some other (mostly container) types, which take arguments. Instead of the Ts you can use any other type explained here.</p><ul>
<li><em>SET(T)</em></li>
<li><em>PAIR(T1, T2)</em></li>
<li><em>MAP(T1, T2)</em></li>
<li><em>VECTOR(T)</em></li>
<li><em>FUNCTION(T)</em></li>
</ul>
<p>You also can define template types, in case you want to create template methods. These types only work for methods. To use a template simply use the <em>TEMPLATE</em> specifier. If you want to limit the template to a set of types (which is highly recommended) add those types in a list e.g.: <em>TEMPLATE[STRING, INT]</em> If you don't give this list, the template is generated for these types: [<em>STRING</em>, <em>INTEGER</em>, <em>INTEGER64</em>, <em>BOOLEAN</em>, <em>FLOAT</em>, <em>FLOAT64</em>, <em>JSON</em>]</p>
<p>Finally there is the XTYPE specifier: <em>XTYPE(Name of an XType specialization)</em> With this specifier you state that you expect this to be an subclass of XType. Please note that for XTypes you have to specify for return types whether you want to return a pointer (<em>XTYPE(Component)</em>) or a value(<em>XTYPE(ComponentPtr)</em>). XType arguments are always passed as pointer, so you don't need the <em>Ptr</em> suffix.</p>
<p>If you have other custom types (not recommended to use them in the templates) you can just type there name, but note that the xtypes_generator won't be able to create python bindings for it, so you either have to bind those yourself, adapt the pybind files or do this only for projects where you don't generate the python bindings. Also make sure that you include those types definitions. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
